[[ch03_bitcoin_client]]

== Bitcoin Core: L'implementazione di riferimento

Le persone sono disposte ad accettare denaro in cambio di beni e servizi solo se hanno la certezza di poterlo utilizzare in futuro. Poiché il denaro contraffatto o svalutato inaspettatamente potrebbe non essere accettato, chiunque riceva bitcoin ha un forte incentivo a verificare che la rete non presenti problemi. Il sistema Bitcoin è stato progettato per consentire al software in esecuzione sul proprio computer di prevenire contraffazioni, svalutazioni e altre criticità. Questo software è chiamato _nodo di validazione completo_ (o _full node_), poiché verifica ogni transazione confermata rispetto a tutte le regole del sistema. I full node, o semplicemente _nodi completi_, forniscono anche strumenti e dati utili per comprendere il funzionamento di Bitcoin e monitorare l'attività della rete.

In questo capitolo, installeremo Bitcoin Core, l'implementazione di riferimento utilizzata dalla maggior parte degli operatori di full node sin dagli albori della rete Bitcoin. Successivamente, analizzeremo blocchi, transazioni e altri dati provenienti dal nostro nodo. Tali dati sono autorevoli non perché un'entità centrale li abbia approvati, ma perché il nostro nodo li ha verificati in modo indipendente. Nel resto del libro, continueremo a utilizzare Bitcoin Core per creare ed esaminare dati relativi alla blockchain e alla rete.

=== Da Bitcoin a Bitcoin Core

Bitcoin è un progetto _open source_: il suo codice sorgente è disponibile con una licenza aperta (MIT), scaricabile gratuitamente e utilizzabile per qualsiasi scopo. Bitcoin è sviluppato da una comunità aperta di volontari. Inizialmente, questa comunità era composta unicamente da Satoshi Nakamoto. Nel 2023, il codice sorgente di Bitcoin contava oltre 1.000 contributori, con circa una dozzina di sviluppatori impegnati a tempo pieno e diverse decine di collaboratori part-time. Chiunque può contribuire al codice, te compreso!

Quando Satoshi Nakamoto creò Bitcoin, il software era già in gran parte completato, ancor prima della pubblicazione del white paper (disponibile in <<satoshi_whitepaper>>). Satoshi voleva assicurarsi che l'implementazione funzionasse correttamente prima di renderla pubblica. Quella prima implementazione, nota semplicemente come "Bitcoin", è stata profondamente modificata e migliorata nel tempo, evolvendosi in quello che oggi conosciamo come _Bitcoin Core_, per distinguerla da altre implementazioni. Bitcoin Core è l'_implementazione di riferimento_ del sistema Bitcoin: definisce lo standard con cui ogni parte della tecnologia dovrebbe essere implementata. Bitcoin Core implementa tutti gli aspetti di Bitcoin, inclusi i wallet, un motore di validazione per transazioni e blocchi, strumenti per la costruzione di blocchi e tutti i moderni componenti della comunicazione peer-to-peer.

<<bitcoin_core_architecture>> mostra l'architettura di Bitcoin Core.

[[bitcoin_core_architecture]]
.Architettura di Bitcoin Core (Fonte: Eric Lombrozo).
image::images/mbc3_0301.png["Bitcoin Core Architecture"]

Sebbene Bitcoin Core sia l'implementazione di riferimento per molti componenti fondamentali del sistema, il white paper di Bitcoin descrive solo alcuni degli elementi iniziali del progetto. La maggior parte degli aggiornamenti significativi, a partire dal 2011, è documentata nei https://oreil.ly/BCXAQ[Bitcoin Improvement Proposals (BIP)]. Nel corso del libro, faremo riferimento a queste specifiche utilizzando il loro numero di identificazione; ad esempio, il BIP 9 descrive un meccanismo impiegato per diversi importanti aggiornamenti di Bitcoin.

=== Ambiente di sviluppo Bitcoin

Se sei uno sviluppatore, è fondamentale configurare un ambiente di sviluppo che includa tutti gli strumenti, le librerie e i software necessari per creare applicazioni Bitcoin. In questo capitolo, esamineremo nel dettaglio la procedura. Se l'argomento dovesse risultare troppo complesso e non hai intenzione di configurare un ambiente di sviluppo, puoi tranquillamente passare al capitolo successivo, meno tecnico.

[[compiling_core]]

=== Compilare Bitcoin Core dal codice sorgente

Il codice sorgente di Bitcoin Core può essere scaricato come file ZIP o clonando il repository GitHub. Visita la https://oreil.ly/hN9g1[pagina di download di Bitcoin Core], seleziona la versione più recente e scarica il file ZIP del codice sorgente. In alternativa, puoi utilizzare il comando `git` per creare una copia locale del repository dalla pagina https://oreil.ly/BdOwl[GitHub di Bitcoin].


[SUGGERIMENTO]
====
In molti esempi di questo capitolo, utilizzeremo l'interfaccia a riga di comando del sistema operativo (nota anche come "shell"), accessibile tramite un'applicazione "terminale". La shell mostrerà un prompt, tu digiterai un comando e la shell risponderà con del testo, per poi visualizzare nuovamente un prompt per il comando successivo. Il prompt potrebbe apparire diverso sul tuo sistema, ma negli esempi che seguono lo indicheremo con il simbolo `$`.

Quando negli esempi vedi del testo dopo il simbolo `$`, non digitare il simbolo stesso, ma scrivi direttamente il comando che lo segue e premi Invio per eseguirlo. Le righe sottostanti a ogni comando mostrano le risposte del sistema operativo. Quando vedrai nuovamente il simbolo `$`, saprai che si tratta di un nuovo comando e potrai ripetere la procedura.
====

Qui, utilizziamo il comando `git` per creare una copia locale ("clone") del codice sorgente:

----
$ git clone https://github.com/bitcoin/bitcoin.git
Cloning into 'bitcoin'...
remote: Enumerating objects: 245912, done.
remote: Counting objects: 100% (3/3), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 245912 (delta 1), reused 2 (delta 1), pack-reused 245909
Receiving objects: 100% (245912/245912), 217.74 MiB | 13.05 MiB/s, done.
Resolving deltas: 100% (175649/175649), done.
----

[TIP]
====
Git è il sistema di controllo di versione distribuito più utilizzato, uno strumento essenziale per qualsiasi sviluppatore di software. Potrebbe essere necessario installare il comando `git` o un'interfaccia grafica per Git sul tuo sistema operativo, se non è già presente.
====

Al termine dell'operazione di clonazione, avrai una copia locale completa del repository del codice sorgente nella cartella _bitcoin_. Accedi a questa cartella con il comando `cd`:

----
$ cd bitcoin
----

==== Selezionare una Versione di Bitcoin Core

Per impostazione predefinita, la copia locale del repository è sincronizzata con il codice più recente, che potrebbe essere una versione instabile o beta di Bitcoin. Prima di compilare, è consigliabile selezionare una versione specifica tramite un _tag_ di release. Questo comando sincronizza la copia locale con una versione precisa del codice, contrassegnata da un'etichetta (tag). Gli sviluppatori utilizzano i tag per versionare il software. Per visualizzare i tag disponibili, utilizza il comando `git tag`:

----
$ git tag
v0.1.5
v0.1.6test1
v0.10.0
...
v0.11.2
v0.11.2rc1
v0.12.0rc1
v0.12.0rc2
...
----

L'elenco dei tag mostra tutte le versioni rilasciate di Bitcoin. Per convenzione, le versioni _candidate al rilascio_ (destinate ai test) sono identificate dal suffisso "rc", mentre le versioni stabili, adatte all'uso in produzione, non hanno alcun suffisso. Dall'elenco, seleziona la versione stabile più recente (al momento della scrittura, la v24.0.1). Per sincronizzare il codice locale con questa versione, utilizza il comando `git checkout`:

----
$ git checkout v24.0.1
Note: switching to 'v24.0.1'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

HEAD is now at b3f866a8d Merge bitcoin/bitcoin#26647: 24.0.1 final changes
----

Per verificare di aver selezionato la versione corretta, esegui il comando `git status`:

----
HEAD detached at v24.0.1
nothing to commit, working tree clean
----

==== Configurazione della build di Bitcoin Core

Il codice sorgente include una documentazione dettagliata, consultabile in diversi file. Ti consigliamo di leggere la documentazione principale, contenuta nel file _README.md_ nella directory _bitcoin_.

In questo capitolo, compileremo il demone di Bitcoin Core (server), noto come `bitcoind` su Linux e altri sistemi Unix. Per istruzioni dettagliate sulla compilazione del client a riga di comando `bitcoind` per la tua piattaforma, consulta il file _doc/build-unix.md_.

Per altre piattaforme, puoi trovare istruzioni specifiche nella directory _doc_; ad esempio, _build-windows.md_ contiene le indicazioni per Windows. Al momento della stesura, sono disponibili istruzioni per Android, FreeBSD, NetBSD, OpenBSD, macOS (OSX), Unix e Windows.

Prima di procedere, esamina attentamente i prerequisiti per la compilazione, elencati nella prima parte della documentazione. Questi includono librerie e pacchetti che devono essere installati sul tuo sistema. Se un prerequisito è mancante, il processo di compilazione si interromperà con un errore. In tal caso, sarà sufficiente installare il componente mancante e riavviare la compilazione. Una volta verificato che tutti i prerequisiti siano soddisfatti, puoi avviare il processo generando gli script di build con il comando _autogen.sh_:

----
$ ./autogen.sh
libtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, 'build-aux'.
libtoolize: copying file 'build-aux/ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'build-aux/m4'.
 ...
configure.ac:58: installing 'build-aux/missing'
src/Makefile.am: installing 'build-aux/depcomp'
parallel-tests: installing 'build-aux/test-driver'
----

Lo script _autogen.sh_ genera una serie di script di configurazione automatica che analizzano il sistema per determinare le impostazioni corrette e verificare la presenza di tutte le librerie necessarie alla compilazione. Il più importante di questi script è `configure`, che offre diverse opzioni per personalizzare il processo. Per visualizzare le opzioni disponibili, utilizza il flag `--help`:

----
$ ./configure --help
`configure' configures Bitcoin Core 24.0.1 to adapt to many kinds of systems.

Usage: ./configure [OPTION]... [VAR=VALUE]...

...
Optional Features:
  --disable-option-checking  ignore unrecognized --enable/--with options
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --enable-silent-rules   less verbose build output (undo: "make V=1")
  --disable-silent-rules  verbose build output (undo: "make V=0")
...
----

Lo script `configure` ti permette di abilitare o disabilitare funzionalità specifiche di `bitcoind` tramite i flag `--enable-FEATURE` e `--disable-FEATURE`, dove `FEATURE` va sostituito con il nome della funzionalità, come indicato nell'output di aiuto. In questo capitolo, compileremo il client `bitcoind` con le funzionalità predefinite, senza utilizzare flag di configurazione. Tuttavia, è consigliabile esaminare le opzioni disponibili per comprendere quali componenti opzionali sono inclusi. Se ti trovi in un ambiente accademico, come un laboratorio informatico, potresti dover installare le applicazioni nella tua directory home, utilizzando l'opzione `--prefix=$HOME`.

Ecco alcune opzioni utili per modificare il comportamento predefinito dello script `configure`:

++++
<dl>
<dt><code>--prefix=$HOME</code></dt>
<dd><p>Sovrascrive la directory di installazione predefinita (<em>/usr/local/</em>) per l'eseguibile. Utilizza <code>$HOME</code> per installare tutto nella tua directory home o in un percorso diverso.</p></dd>

<dt><code>--disable-wallet</code></dt>
<dd><p>Disabilita l'implementazione del wallet di riferimento.</p></dd>

<dt><code>--with-incompatible-bdb</code></dt>
<dd><p>Se stai compilando un wallet, consente l'uso di una versione incompatibile della libreria Berkeley DB.</p></dd>

<dt><code>--with-gui=no</code></dt>
<dd><p>Non compila l'interfaccia grafica utente, che richiede la libreria Qt. Questa opzione compila solo il server e il client a riga di comando di Bitcoin Core.</p></dd>
</dl>
++++

Successivamente, esegui lo script `configure` per individuare automaticamente le librerie necessarie e creare uno script di build personalizzato per il tuo sistema:

----
$ ./configure
checking for pkg-config... /usr/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
...
[many pages of configuration tests follow]
...
----

Se il processo si conclude con successo, il comando `configure` genererà gli script di build personalizzati, pronti per compilare `bitcoind`. In caso di librerie mancanti o altri errori, il comando si interromperà segnalando il problema. Se ciò accade, è probabile che manchi una libreria necessaria o che una versione sia incompatibile. Rivedi la documentazione di compilazione, assicurati di aver installato tutti i prerequisiti e riesegui `configure`.

==== Compilazione degli eseguibili di Bitcoin Core

Successivamente, compila il codice sorgente. Il processo può richiedere fino a un'ora, a seconda della velocità della CPU e della memoria disponibile. In caso di errori o interruzioni, è possibile riprendere la compilazione in qualsiasi momento, semplicemente rieseguendo il comando `make`. Digita `make` per avviare la compilazione:

----
$ make
Making all in src
  CXX      bitcoind-bitcoind.o
  CXX      libbitcoin_node_a-addrdb.o
  CXX      libbitcoin_node_a-addrman.o
  CXX      libbitcoin_node_a-banman.o
  CXX      libbitcoin_node_a-blockencodings.o
  CXX      libbitcoin_node_a-blockfilter.o
[... many more compilation messages follow ...]
----

Su sistemi con più CPU, è possibile velocizzare il processo impostando il numero di processi di compilazione paralleli. Ad esempio, il comando `make -j 2` utilizzerà due core, se disponibili. Se tutto è andato a buon fine, Bitcoin Core è compilato. A questo punto, esegui la suite di test unitari con il comando `make check` per verificare l'assenza di errori evidenti. L'ultimo passaggio consiste nell'installare gli eseguibili sul sistema tramite il comando `make install`. Potrebbe essere richiesta la password dell'utente, poiché questa operazione richiede privilegi di amministratore.

----
$ make check && sudo make install
Password:
Making install in src
 ../build-aux/install-sh -c -d '/usr/local/lib'
libtool: install: /usr/bin/install -c bitcoind /usr/local/bin/bitcoind
libtool: install: /usr/bin/install -c bitcoin-cli /usr/local/bin/bitcoin-cli
libtool: install: /usr/bin/install -c bitcoin-tx /usr/local/bin/bitcoin-tx
...
----

Per impostazione predefinita, `bitcoind` viene installato in _/usr/local/bin_. Puoi verificare che l'installazione sia avvenuta correttamente chiedendo al sistema il percorso degli eseguibili:

----
$ which bitcoind
/usr/local/bin/bitcoind

$ which bitcoin-cli
/usr/local/bin/bitcoin-cli
----

=== Esecuzione di un Nodo Bitcoin Core

La rete peer-to-peer di Bitcoin è composta da "nodi", gestiti principalmente da volontari e da alcune aziende che offrono servizi basati su Bitcoin. Chiunque gestisca un nodo ha una visione diretta e autorevole della blockchain, con una copia locale di tutti i bitcoin spendibili, validata in modo indipendente dal proprio sistema. Gestire un nodo significa non dover dipendere da terze parti per validare le transazioni. Inoltre, utilizzare un nodo per verificare le transazioni ricevute nel proprio wallet contribuisce a rendere la rete Bitcoin più robusta e sicura.

Tuttavia, la gestione di un nodo richiede il download e l'elaborazione di oltre 500 GB di dati iniziali, a cui si aggiungono circa 400 MB di nuove transazioni al giorno (dati aggiornati al 2023 e destinati a crescere). Se il nodo viene spento o perde la connessione a Internet per diversi giorni, al riavvio dovrà recuperare tutti i dati mancanti. Ad esempio, dopo 10 giorni di inattività, sarà necessario scaricare circa 4 GB di dati. A seconda che si scelga di indicizzare tutte le transazioni e conservare una copia completa della blockchain, lo spazio su disco richiesto può essere notevole: almeno 1 TB, se si prevede di mantenere il nodo attivo per diversi anni.

Per impostazione predefinita, i nodi Bitcoin trasmettono transazioni e blocchi ad altri nodi (peer), consumando banda in upload. Se la tua connessione Internet è limitata, ha un tetto massimo di dati o è a consumo, potrebbe non essere adatta per gestire un nodo. In alternativa, puoi configurare il nodo per limitare il consumo di banda (vedi <<bitcoincorenode_config>>) o collegarlo a una rete diversa, come quella satellitare gratuita di https://oreil.ly/cIwf3[Blockstream Satellite].

[TIP]
====
Bitcoin Core mantiene, per impostazione predefinita, una copia completa della blockchain, che contiene quasi tutte le transazioni confermate sulla rete sin dal 2009. Questo archivio occupa centinaia di gigabyte e viene scaricato gradualmente nel corso di ore o giorni, a seconda della velocità della CPU e della connessione a Internet. Bitcoin Core non potrà elaborare transazioni né aggiornare i saldi dei conti finché l'intera blockchain non sarà stata scaricata. Assicurati di avere spazio su disco, larghezza di banda e tempo sufficienti per completare la sincronizzazione iniziale. È possibile configurare Bitcoin Core per ridurre lo spazio occupato dalla blockchain eliminando i blocchi più vecchi, ma sarà comunque necessario scaricare l'intero archivio almeno una volta.
====

Nonostante i requisiti di risorse, migliaia di persone gestiscono nodi Bitcoin, alcuni dei quali funzionano su sistemi semplici come un Raspberry Pi, un computer da 35 dollari grande quanto un mazzo di carte.

[role="less_space pagebreak-before"]
Perché gestire un nodo? Ecco alcune delle ragioni più comuni:

- **Autonomia**: non dipendere da terze parti per validare le transazioni.
- **Privacy**: non rivelare a terzi quali transazioni appartengono al tuo wallet.
- **Sviluppo**: se sviluppi software per Bitcoin, un nodo ti permette di accedere alla rete e alla blockchain tramite API.
- **Validazione**: se crei applicazioni che devono validare le transazioni secondo le regole di consenso di Bitcoin, un nodo è indispensabile. Le aziende del settore, di solito, ne gestiscono diversi.
- **Supporto alla rete**: gestire un nodo per validare le transazioni che ricevi contribuisce a rendere la rete Bitcoin più robusta e sicura.

Se sei interessato a una maggiore sicurezza, a una privacy avanzata o allo sviluppo di software per Bitcoin, dovresti considerare di gestire un tuo nodo.

[[bitcoincorenode_config]]
=== Configurare il Nodo Bitcoin Core

A ogni avvio, Bitcoin Core cerca un file di configurazione nella sua directory dei dati. In questa sezione, esamineremo le varie opzioni disponibili e impareremo a impostare un file di configurazione. Per individuare la posizione del file, esegui `bitcoind -printtoconsole` nel terminale e osserva le prime righe dell'output:

----
$ bitcoind -printtoconsole
2023-01-28T03:21:42Z Bitcoin Core version v24.0.1
2023-01-28T03:21:42Z Using the 'x86_shani(1way,2way)' SHA256 implementation
2023-01-28T03:21:42Z Using RdSeed as an additional entropy source
2023-01-28T03:21:42Z Using RdRand as an additional entropy source
2023-01-28T03:21:42Z Default data directory /home/harding/.bitcoin
2023-01-28T03:21:42Z Using data directory /home/harding/.bitcoin
2023-01-28T03:21:42Z Config file: /home/harding/.bitcoin/bitcoin.conf
...
[a lot more debug output]
...
----

Una volta individuata la posizione del file, puoi spegnere il nodo premendo `Ctrl+C`. Di solito, il file di configurazione si trova nella directory _.bitcoin_, all'interno della cartella home dell'utente. Aprilo con il tuo editor di testo preferito per modificarlo.

Bitcoin Core offre più di 100 opzioni di configurazione che permettono di personalizzare il comportamento del nodo, la gestione dello spazio di archiviazione della blockchain e molti altri aspetti. Per visualizzare un elenco completo, esegui il comando `bitcoind --help` nel terminale:

----
$ bitcoind --help
Bitcoin Core version v24.0.1

Usage:  bitcoind [options]                     Start Bitcoin Core

Options:

  -?
       Print this help message and exit

  -alertnotify=<cmd>
       Execute command when an alert is raised (%s in cmd is replaced by
       message)
...
[many more options]
----

Ecco alcune delle opzioni più importanti, che possono essere impostate sia nel file di configurazione sia come parametri a riga di comando per `bitcoind`:

++alertnotify++:: Esegue un comando o uno script per inviare avvisi di emergenza al proprietario del nodo.

++conf++:: Specifica una posizione alternativa per il file di configurazione. Questa opzione è utile solo come parametro a riga di comando, poiché non può essere inserita nel file di configurazione stesso.

++datadir++:: Seleziona la directory in cui salvare i dati della blockchain. Per impostazione predefinita, viene utilizzata la sottodirectory _.bitcoin_ nella tua home. A seconda della configurazione, lo spazio richiesto può variare da 10 GB a quasi 1 TB (dati del 2023), con una crescita prevista di centinaia di gigabyte all'anno.

++prune++:: Riduci lo spazio su disco necessario, impostando una dimensione massima (in megabyte) per la blockchain e eliminando i blocchi più vecchi. Questa opzione è utile per nodi con risorse limitate. Tuttavia, altre parti del sistema occuperanno comunque spazio aggiuntivo, quindi sarà necessario disporre di uno spazio minimo, come indicato nell'opzione `datadir`.

++txindex++:: Mantiene un indice di tutte le transazioni, consentendo di recuperarle tramite script utilizzando il loro ID, a condizione che il blocco contenente la transazione non sia stato eliminato (pruned).

[role="less_space pagebreak-before"]
++dbcache++:: Imposta la dimensione della cache per gli UTXO. Il valore predefinito è di 450 mebibyte (MiB). Aumenta questa dimensione su hardware di fascia alta per ridurre la frequenza di lettura e scrittura su disco; riducila su hardware di fascia bassa per risparmiare memoria, a scapito di un maggiore utilizzo del disco.

++blocksonly++:: Riduci al minimo l'uso della larghezza di banda, accettando solo blocchi di transazioni confermate dai tuoi peer e non trasmettendo transazioni non confermate.

++maxmempool++:: Limita la dimensione della mempool (il "serbatoio" delle transazioni in attesa) a un determinato numero di megabyte. Utile per ridurre il consumo di memoria su nodi con risorse limitate.

[[txindex]]
=== Indice del database delle transazioni e opzione `txindex`

Per impostazione predefinita, Bitcoin Core crea un database che include _solo_ le transazioni relative al wallet dell'utente. Se desideri poter accedere a qualsiasi transazione utilizzando comandi come `getrawtransaction` (vedi <<exploring_and_decoding_transactions>>), devi configurare Bitcoin Core per creare un indice completo. Per farlo, abilita l'opzione `txindex`. Imposta `txindex=1` nel file di configurazione. Se attivi questa opzione in un secondo momento, sarà necessario attendere il tempo necessario per la ricostruzione dell'indice.

<<full_index_node>> mostra come combinare le opzioni precedenti in un nodo completamente indicizzato, ideale come backend API per un'applicazione Bitcoin.

[[full_index_node]]
.Esempio di configurazione di un nodo con indice completo
====
----
alertnotify=myemailscript.sh "Alert: %s"
datadir=/lotsofspace/bitcoin
txindex=1
----
====

<<constrained_resources>> mostra un nodo con risorse limitate, in esecuzione su un server di piccole dimensioni.

[[constrained_resources]]
.Esempio di configurazione per un sistema con risorse limitate
====
----
alertnotify=myemailscript.sh "Alert: %s"
blocksonly=1
prune=5000
dbcache=150
maxmempool=150
----
====

Dopo aver modificato il file di configurazione con le opzioni più adatte alle tue esigenze, puoi testare `bitcoind`. Esegui Bitcoin Core con l'opzione `printtoconsole` per avviarlo in primo piano e visualizzare l'output direttamente sulla console:

----
$ bitcoind -printtoconsole
2023-01-28T03:43:39Z Bitcoin Core version v24.0.1
2023-01-28T03:43:39Z Using the 'x86_shani(1way,2way)' SHA256 implementation
2023-01-28T03:43:39Z Using RdSeed as an additional entropy source
2023-01-28T03:43:39Z Using RdRand as an additional entropy source
2023-01-28T03:43:39Z Default data directory /home/harding/.bitcoin
2023-01-28T03:43:39Z Using data directory /lotsofspace/bitcoin
2023-01-28T03:43:39Z Config file: /home/harding/.bitcoin/bitcoin.conf
2023-01-28T03:43:39Z Config file arg: [main] blockfilterindex="1"
2023-01-28T03:43:39Z Config file arg: [main] maxuploadtarget="1000"
2023-01-28T03:43:39Z Config file arg: [main] txindex="1"
2023-01-28T03:43:39Z Setting file arg: wallet = ["msig0"]
2023-01-28T03:43:39Z Command-line arg: printtoconsole=""
2023-01-28T03:43:39Z Using at most 125 automatic connections 
2023-01-28T03:43:39Z Using 16 MiB out of 16 MiB requested for signature cache
2023-01-28T03:43:39Z Using 16 MiB out of 16 MiB requested for script execution 
2023-01-28T03:43:39Z Script verification uses 3 additional threads
2023-01-28T03:43:39Z scheduler thread start
2023-01-28T03:43:39Z [http] creating work queue of depth 16
2023-01-28T03:43:39Z Using random cookie authentication.
2023-01-28T03:43:39Z Generated RPC cookie /lotsofspace/bitcoin/.cookie
2023-01-28T03:43:39Z [http] starting 4 worker threads
2023-01-28T03:43:39Z Using wallet directory /lotsofspace/bitcoin/wallets
2023-01-28T03:43:39Z init message: Verifying wallet(s)…
2023-01-28T03:43:39Z Using BerkeleyDB version Berkeley DB 4.8.30
2023-01-28T03:43:39Z Using /16 prefix for IP bucketing
2023-01-28T03:43:39Z init message: Loading P2P addresses…
2023-01-28T03:43:39Z Loaded 63866 addresses from peers.dat  114ms
[... more startup messages ...]
----

Puoi premere `Ctrl+C` per interrompere il processo, una volta verificato che stia caricando le impostazioni corrette. Per eseguire Bitcoin Core in background, avvialo con l'opzione `daemon`, utilizzando il comando `bitcoind -daemon`. Per monitorare lo stato di avanzamento e il funzionamento del nodo, avvialo in modalità `daemon` e poi utilizza il comando `bitcoin-cli getblockchaininfo`:

----
$ bitcoin-cli getblockchaininfo
----

[source,json]
----
{
  "chain": "main",
  "blocks": 0,
  "headers": 83999,
  "bestblockhash": "[...]19d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
  "difficulty": 1,
  "time": 1673379796,
  "mediantime": 1231006505,
  "verificationprogress": 3.783041623201835e-09,
  "initialblockdownload": true,
  "chainwork": "[...]000000000000000000000000000000000000000000000100010001",
  "size_on_disk": 89087,
  "pruned": false,
  "warnings": ""
}
----

Questo output mostra un nodo con un'altezza della blockchain di 0 blocchi e 83.999 header. Il nodo recupera prima gli header dai suoi peer per individuare la blockchain con la maggiore proof-of-work, per poi procedere al download dei blocchi completi, validandoli man mano.

Una volta soddisfatto della configurazione, è consigliabile aggiungere Bitcoin Core agli script di avvio del sistema operativo, in modo che venga eseguito costantemente e si riavvii automaticamente a ogni riavvio del sistema. Nella directory _contrib/init_ del codice sorgente di Bitcoin Core, troverai esempi di script di avvio per vari sistemi operativi, con un file README.md che ne illustra l'utilizzo.

=== L'API di Bitcoin Core

Bitcoin Core implementa un'interfaccia JSON-RPC accessibile anche tramite il client a riga di comando `bitcoin-cli`. Questo strumento permette di sperimentare in modo interattivo le stesse funzionalità disponibili a livello di programmazione tramite l'API. Per iniziare, esegui il comando `help` per visualizzare l'elenco dei comandi RPC disponibili:

[[bitcoind_commands]]

----
$ bitcoin-cli help
+== Blockchain ==
getbestblockhash
getblock "blockhash" ( verbosity )
getblockchaininfo
...
walletpassphrase "passphrase" timeout
walletpassphrasechange "oldpassphrase" "newpassphrase"
walletprocesspsbt "psbt" ( sign "sighashtype" bip32derivs finalize )
----


Ogni comando può accettare diversi parametri. Per ottenere una descrizione dettagliata e informazioni sui parametri, aggiungi il nome del comando dopo `help`. Ad esempio, per visualizzare l'aiuto relativo al comando RPC `getblockhash`:

----
$ bitcoin-cli help getblockhash
getblockhash height

Returns hash of block in best-block-chain at height provided.

Arguments:
1. height    (numeric, required) The height index

Result:
"hex"    (string) The block hash

Examples:
> bitcoin-cli getblockhash 1000
> curl --user myusername --data-binary '{"jsonrpc": "1.0", "id": "curltest",
  "method": "getblockhash", 
  "params": [1000]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/
----

Al termine della descrizione, vedrai due esempi di comandi RPC, uno che utilizza `bitcoin-cli` e l'altro il client HTTP `curl`. Questi esempi mostrano come invocare il comando. Copia e incolla il primo esempio per vedere il risultato:

----
$ bitcoin-cli getblockhash 1000
00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09
----

Il risultato è l'hash di un blocco, un concetto che approfondiremo nei prossimi capitoli. Per ora, è sufficiente sapere che questo comando dovrebbe restituire lo stesso risultato sul tuo sistema, a dimostrazione che il tuo nodo Bitcoin Core è attivo, accetta comandi e possiede le informazioni relative al blocco 1.000.

Nelle prossime sezioni, vedremo alcuni comandi RPC particolarmente utili e il loro output.

==== Ottenere informazioni sullo stato di Bitcoin Core

Bitcoin Core fornisce rapporti di stato sui suoi diversi moduli tramite l'interfaccia JSON-RPC. I comandi più importanti sono `getblockchaininfo`, `getmempoolinfo`, `getnetworkinfo` e `getwalletinfo`.

Il comando RPC `getblockchaininfo` è stato introdotto in precedenza. Il comando `getnetworkinfo` mostra informazioni di base sullo stato del nodo di rete. Eseguilo con `bitcoin-cli`:

----
$ bitcoin-cli getnetworkinfo
----
[source,json]
----
{
  "version": 240001,
  "subversion": "/Satoshi:24.0.1/",
  "protocolversion": 70016,
  "localservices": "0000000000000409",
  "localservicesnames": [
    "NETWORK",
    "WITNESS",
    "NETWORK_LIMITED"
  ],
  "localrelay": true,
  "timeoffset": -1,
  "networkactive": true,
  "connections": 10,
  "connections_in": 0,
  "connections_out": 10,
  "networks": [
    "...detailed information about all networks..."
  ],
  "relayfee": 0.00001000,
  "incrementalfee": 0.00001000,
  "localaddresses": [
  ],
  "warnings": ""
}
----

I dati sono restituiti in formato JSON (JavaScript Object Notation), facilmente interpretabile da qualsiasi linguaggio di programmazione e intuitivo anche per un essere umano. Tra le informazioni fornite, troviamo le versioni del software Bitcoin Core e del protocollo Bitcoin, il numero di connessioni attive e vari altri dettagli sulla rete e sulle impostazioni del nodo.

[TIP]
====
Potrebbe essere necessario del tempo, anche più di un giorno, prima che `bitcoind` raggiunga l'altezza attuale della blockchain, poiché deve scaricare i blocchi dagli altri nodi e validare ogni transazione contenuta in essi (quasi un miliardo al momento della scrittura). Puoi monitorare i progressi utilizzando `getblockchaininfo` per visualizzare il numero di blocchi scaricati. Gli esempi nel resto del capitolo presuppongono che tu abbia raggiunto almeno il blocco 775.072. Poiché la sicurezza delle transazioni dipende dai blocchi, alcune informazioni nei prossimi esempi potrebbero variare leggermente in base al numero di blocchi del tuo nodo.
====

[[exploring_and_decoding_transactions]]
==== Esplorare e decodificare le transazioni

In <<spending_bitcoin>>, Alice ha effettuato un acquisto presso il negozio di Bob e la sua transazione è stata registrata sulla blockchain. Utilizziamo l'API per recuperare ed esaminare quella transazione, fornendo il suo ID (txid) come parametro:

[[alice_tx_serialized]]
.La transazione serializzata di Alice
----
$ bitcoin-cli getrawtransaction 466200308696215bbc949d5141a49a41\
38ecdfdfaa2a8029c1f9bcecd1f96177

01000000000101eb3ae38f27191aa5f3850dc9cad00492b88b72404f9da13569
8679268041c54a0100000000ffffffff02204e0000000000002251203b41daba
4c9ace578369740f15e5ec880c28279ee7f51b07dca69c7061e07068f8240100
000000001600147752c165ea7be772b2c0acb7f4d6047ae6f4768e0141cf5efe
2d8ef13ed0af21d4f4cb82422d6252d70324f6f4576b727b7d918e521c00b51b
e739df2f899c49dc267c0ad280aca6dab0d2fa2b42a45182fc83e81713010000
0000
----

[TIP]
====
Gli ID di transazione (txid) non sono sempre autorevoli. L'assenza di un txid dalla blockchain non garantisce che la transazione non sia stata elaborata. Questo fenomeno, noto come "malleabilità delle transazioni", si verifica perché le transazioni possono essere modificate prima di essere confermate in un blocco, alterando di conseguenza il loro txid. Una volta che una transazione è inclusa in un blocco, il suo txid non può cambiare, a meno che non si verifichi una riorganizzazione della blockchain, evento raro dopo che una transazione ha ricevuto diverse conferme.
====

Il comando `getrawtransaction` restituisce una transazione serializzata in formato esadecimale. Per decodificarla, utilizziamo il comando `decoderawtransaction`, passando i dati esadecimali come parametro. Puoi copiare l'output esadecimale di `getrawtransaction` e incollarlo come parametro per `decoderawtransaction`:

++++
<pre data-type="programlisting">
$ bitcoin-cli decoderawtransaction 01000000000101eb3ae38f27191aa5f3850dc9cad0\
0492b88b72404f9da135698679268041c54a0100000000ffffffff02204e00000000000022512\
03b41daba4c9ace578369740f15e5ec880c28279ee7f51b07dca69c7061e07068f82401000000\
00001600147752c165ea7be772b2c0acb7f4d6047ae6f4768e0141cf5efe2d8ef13ed0af21d4f\
4cb82422d6252d70324f6f4576b727b7d918e521c00b51be739df2f899c49dc267c0ad280aca6\
dab0d2fa2b42a45182fc83e817130100000000
</pre>
++++

++++
<pre data-type="programlisting" data-code-language="json">
{
  "txid": "466200308696215bbc949d5141a49a4138ecdfdfaa2a8029c1f9bcecd1f96177",
  "hash": "f7cdbc7cf8b910d35cc69962e791138624e4eae7901010a6da4c02e7d238cdac",
  "version": 1,
  "size": 194,
  "vsize": 143,
  "weight": 569,
  "locktime": 0,
  "vin": [
    {
      "txid": "4ac541802679866935a19d4f40728bb89204d0cac90d85f3a51a19...aeb",
      "vout": 1,
      "scriptSig": {
        "asm": "",
        "hex": ""
      },
      "txinwitness": [
        "cf5efe2d8ef13ed0af21d4f4cb82422d6252d70324f6f4576b727b7d918e5...301"
      ],
      "sequence": 4294967295
    }
  ],
  "vout": [
    {
      "value": 0.00020000,
      "n": 0,
      "scriptPubKey": {
        "asm": "1 3b41daba4c9ace578369740f15e5ec880c28279ee7f51b07dca...068",
        "desc": "rawtr(3b41daba4c9ace578369740f15e5ec880c28279ee7f51b...6ev",
        "hex": "51203b41daba4c9ace578369740f15e5ec880c28279ee7f51b07d...068",
        "address": "bc1p8dqa4wjvnt890qmfws83te0v3qxzsfu7ul63kp7u56w8q...5qn",
        "type": "witness_v1_taproot"
      }
    },
    {
      "value": 0.00075000,
      "n": 1,
      "scriptPubKey": {
        "asm": "0 7752c165ea7be772b2c0acb7f4d6047ae6f4768e",
        "desc": "addr(bc1qwafvze0200nh9vkq4jmlf4sy0tn0ga5w0zpkpg)#qq404gts",
        "hex": "00147752c165ea7be772b2c0acb7f4d6047ae6f4768e",
        "address": "bc1qwafvze0200nh9vkq4jmlf4sy0tn0ga5w0zpkpg",
        "type": "witness_v0_keyhash"
      }
    }
  ]
}
</pre>
++++

La decodifica mostra tutti i componenti della transazione, inclusi input e output. In questo caso, la transazione ha utilizzato un input e generato due output. L'input proveniva da una transazione precedente (identificata dal `txid`), mentre i due output corrispondono al pagamento a Bob e al resto per Alice.

Possiamo esplorare ulteriormente la blockchain esaminando la transazione precedente, a cui si fa riferimento tramite il suo `txid`, utilizzando gli stessi comandi (ad esempio, `getrawtransaction`). In questo modo, è possibile seguire a ritroso la catena delle transazioni, man mano che i fondi passano da un proprietario all'altro.

==== Esplorare i blocchi

L'esplorazione dei blocchi è simile a quella delle transazioni, ma è possibile fare riferimento ai blocchi sia tramite la loro _altezza_ (height) sia tramite il loro _hash_. Per prima cosa, individuiamo un blocco in base alla sua altezza. Utilizziamo il comando `getblockhash`, che accetta come parametro l'altezza del blocco e restituisce l'_hash dell'header_ corrispondente.

++++
<pre data-type="programlisting">
$ bitcoin-cli getblockhash 123456
0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682ff6cd83c3ca
</pre>
++++

Ora che conosciamo l'hash dell'header, possiamo interrogare il blocco. Utilizziamo il comando `getblock`, inserendo l'hash come parametro:

++++
<pre data-type="programlisting">
$ bitcoin-cli getblock 0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682f\
f6cd83c3ca
</pre>
++++

++++
<pre data-type="programlisting" data-code-language="json">
{
  "hash": "0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682ff6cd83c3ca",
  "confirmations": 651742,
  "height": 123456,
  "version": 1,
  "versionHex": "00000001",
  "merkleroot": "0e60651a9934e8f0decd1c[...]48fca0cd1c84a21ddfde95033762d86c",
  "time": 1305200806,
  "mediantime": 1305197900,
  "nonce": 2436437219,
  "bits": "1a6a93b3",
  "difficulty": 157416.4018436489,
  "chainwork": "[...]00000000000000000000000000000000000000541788211ac227bc",
  "nTx": 13,
  "previousblockhash": "[...]60bc96a44724fd72daf9b92cf8ad00510b5224c6253ac40095",
  "nextblockhash": "[...]00129f5f02be247070bf7334d3753e4ddee502780c2acaecec6d66",
  "strippedsize": 4179,
  "size": 4179,
  "weight": 16716,
  "tx": [
    "5b75086dafeede555fc8f9a810d8b10df57c46f9f176ccc3dd8d2fa20edd685b",
    "e3d0425ab346dd5b76f44c222a4bb5d16640a4247050ef82462ab17e229c83b4",
    "137d247eca8b99dee58e1e9232014183a5c5a9e338001a0109df32794cdcc92e",
    "5fd167f7b8c417e59106ef5acfe181b09d71b8353a61a55a2f01aa266af5412d",
    "60925f1948b71f429d514ead7ae7391e0edf965bf5a60331398dae24c6964774",
    "d4d5fc1529487527e9873256934dfb1e4cdcb39f4c0509577ca19bfad6c5d28f",
    "7b29d65e5018c56a33652085dbb13f2df39a1a9942bfe1f7e78e97919a6bdea2",
    "0b89e120efd0a4674c127a76ff5f7590ca304e6a064fbc51adffbd7ce3a3deef",
    "603f2044da9656084174cfb5812feaf510f862d3addcf70cacce3dc55dab446e",
    "9a4ed892b43a4df916a7a1213b78e83cd83f5695f635d535c94b2b65ffb144d3",
    "dda726e3dad9504dce5098dfab5064ecd4a7650bfe854bb2606da3152b60e427",
    "e46ea8b4d68719b65ead930f07f1f3804cb3701014f8e6d76c4bdbc390893b94",
    "864a102aeedf53dd9b2baab4eeb898c5083fde6141113e0606b664c41fe15e1f"
  ]
}
</pre>
++++

La voce `confirmations` indica la _profondità_ (depth) del blocco, ovvero quanti blocchi sono stati costruiti sopra di esso, un indicatore della difficoltà di modificare le transazioni contenute. La `height` (altezza) ci dice quanti blocchi lo hanno preceduto. Vediamo anche la versione del blocco, l'ora di creazione (secondo il miner), il tempo mediano degli 11 blocchi precedenti (una misura più difficile da manipolare per i miner) e la dimensione del blocco in tre diverse unità di misura: `stripped size` (senza dati legacy), `full size` (completa) e `weight units` (unità di peso). Sono presenti anche campi legati alla sicurezza e alla proof-of-work (merkle root, nonce, bits, difficulty e chainwork), che analizzeremo in dettaglio in <<mining>>.

==== Utilizzo dell'interfaccia programmabile di Bitcoin Core

Il client `bitcoin-cli` è uno strumento utile per esplorare l'API di Bitcoin Core e testarne le funzionalità. Tuttavia, lo scopo principale di un'API è consentire l'accesso programmatico. In questa sezione, vedremo come interagire con Bitcoin Core da un altro programma.

L'API di Bitcoin Core è un'interfaccia JSON-RPC. JSON è un formato pratico per rappresentare dati, leggibile sia dagli esseri umani sia dai programmi. RPC (Remote Procedure Call) significa che stiamo invocando procedure (funzioni) remote, ospitate sul nodo Bitcoin Core, tramite un protocollo di rete, in questo caso HTTP.

Quando abbiamo usato `bitcoin-cli` per ottenere aiuto su un comando, ci è stato mostrato un esempio di utilizzo di `curl`, un versatile client HTTP a riga di comando, per costruire una chiamata JSON-RPC:

----
$ curl --user myusername --data-binary '{"jsonrpc": "1.0", "id":"curltest",
  "method": "getblockchaininfo", 
  "params": [] }' -H 'content-type: text/plain;' http://127.0.0.1:8332/
----

Questo comando invia una richiesta HTTP all'host locale (127.0.0.1), connettendosi alla porta RPC predefinita di Bitcoin (8332) e inviando una richiesta JSON-RPC per il metodo `getblockchaininfo`, utilizzando la codifica `text/plain`.

Noterai che `curl` richiede l'invio di credenziali. Bitcoin Core genera una password casuale a ogni avvio e la salva nella directory dei dati, nel file _.cookie_. Il client `bitcoin-cli` può leggere questo file se viene fornita la directory dei dati. Allo stesso modo, è possibile copiare la password e passarla a `curl` (o a qualsiasi altro wrapper per le RPC di Bitcoin Core), come mostrato in <<cookie_auth>>.

[[cookie_auth]]
.Utilizzo dell'autenticazione basata su cookie con Bitcoin Core
====
----
$ cat .bitcoin/.cookie
  __cookie__:17c9b71cef21b893e1a019f4bc071950c7942f49796ed061b274031b17b19cd0

$ curl 
  --user __cookie__:17c9b71cef21b893e1a019f4bc071950c7942f49796ed061b274031b17b19cd0 
  --data-binary '{"jsonrpc": "1.0", "id":"curltest", 
  "method": "getblockchaininfo", 
  "params": [] }' -H 'content-type: text/plain;' http://127.0.0.1:8332/

{"result":{"chain":"main","blocks":799278,"headers":799278,
"bestblockhash":"000000000000000000018387c50988ec705a95d6f765b206b6629971e6978879",
"difficulty":53911173001054.59,"time":1689703111,"mediantime":1689701260,
"verificationprogress":0.9999979206082515,"initialblockdownload":false,
"chainwork":"00000000000000000000000000000000000000004f3e111bf32bcb47f9dfad5b",
"size_on_disk":563894577967,"pruned":false,"warnings":""},"error":null,
"id":"curltest"}
----
====

In alternativa, è possibile creare una password statica utilizzando lo script di supporto fornito in _./share/rpcauth/rpcauth.py_, nella directory del codice sorgente di Bitcoin Core. Se stai implementando una chiamata JSON-RPC nel tuo programma, puoi utilizzare una libreria HTTP generica per costruire la richiesta, in modo simile a quanto mostrato con `curl`.

Tuttavia, per la maggior parte dei linguaggi di programmazione più diffusi, esistono librerie che "avvolgono" (wrap) l'API di Bitcoin Core, semplificando notevolmente il processo. Utilizzeremo la libreria `python-bitcoinlib` per accedere più facilmente all'API. Questa libreria non fa parte del progetto Bitcoin Core e deve essere installata separatamente, come qualsiasi altra libreria Python. Ricorda che è necessaria un'istanza attiva di Bitcoin Core per effettuare chiamate JSON-RPC.

Lo script Python in <<rpc_example>> esegue una semplice chiamata a `getblockchaininfo` e stampa il numero di blocchi restituiti da Bitcoin Core.

[[rpc_example]]
.Esecuzione di `getblockchaininfo` tramite l'API JSON-RPC di Bitcoin Core
====
[source,python]
----
include::code/rpc_example.py[]
----
====

Eseguendo lo script, si ottiene il seguente risultato:

----
$ python rpc_example.py
773973
----

Questo output mostra il numero di blocchi presenti nella blockchain del nostro nodo locale. Sebbene non sia un risultato impressionante, dimostra l'utilizzo di base della libreria come interfaccia semplificata per l'API JSON-RPC di Bitcoin Core.

Ora, utilizziamo le chiamate `getrawtransaction` e `decodetransaction` per recuperare i dettagli del pagamento di Alice a Bob. In <<rpc_transaction>>, recuperiamo la transazione di Alice ed elenchiamo i suoi output. Per ogni output, mostriamo l'indirizzo del destinatario e il valore. Ricorda che la transazione di Alice aveva un output per il pagamento a Bob e uno per il resto a se stessa.

[[rpc_transaction]]
.Recuperare una transazione e iterare i suoi output
====
[source,python]
----
include::code/rpc_transaction.py[]
----
====

Eseguendo questo codice, otteniamo:

----
$ python rpc_transaction.py
bc1p8dqa4wjvnt890qmfws83te0v3qxzsfu7ul63kp7u56w8qc0qwp5qv995qn 0.00020000
bc1qwafvze0200nh9vkq4jmlf4sy0tn0ga5w0zpkpg 0.00075000
----

Entrambi gli esempi precedenti sono relativamente semplici e non richiedono necessariamente un programma per essere eseguiti; si potrebbe facilmente usare il client `bitcoin-cli`. Tuttavia, il prossimo esempio, che richiede diverse centinaia di chiamate RPC, dimostra più chiaramente i vantaggi di un'interfaccia programmabile.

In <<rpc_block>>, iniziamo recuperando un blocco, per poi estrarre tutte le transazioni contenute al suo interno, utilizzando i rispettivi ID. Successivamente, analizziamo gli output di ogni transazione e ne sommiamo i valori.

[[rpc_block]]
.Recuperare un blocco e sommare tutti gli output delle transazioni
====
[source,python]
----
include::code/rpc_block.py[]
----
====

Eseguendo questo codice, otteniamo:

----
$ python rpc_block.py

Total value in block:  10322.07722534
----

Il nostro codice calcola che il valore totale delle transazioni in questo blocco è di 10.322,07722534 BTC (inclusi 25 BTC di ricompensa e 0,0909 BTC di commissioni). Confronta questo importo con quello riportato da un block explorer, cercando l'hash o l'altezza del blocco. Alcuni block explorer mostrano il valore totale escludendo sia la ricompensa sia le commissioni. Prova a individuare la differenza.

[[alt_libraries]]
=== Client, librerie e toolkit alternativi

Nell'ecosistema Bitcoin esistono numerosi client, librerie, toolkit e persino implementazioni complete di full node alternativi. Sono disponibili in vari linguaggi di programmazione e offrono agli sviluppatori un'interfaccia nativa nel loro linguaggio preferito.

Le sezioni seguenti elencano alcune delle migliori librerie, client e toolkit, suddivisi per linguaggio di programmazione.

==== C/C++
https://oreil.ly/BdOwl[Bitcoin Core]:: L'implementazione di riferimento di Bitcoin.

==== JavaScript
https://bcoin.io[bcoin]:: Un full node modulare e scalabile, con supporto API.
https://bitcore.io[Bitcore]:: Un full node con API e libreria, sviluppato da BitPay.
https://oreil.ly/4iqf2[BitcoinJS]:: Una libreria Bitcoin interamente scritta in JavaScript, per Node.js e browser.

==== Java
https://bitcoinj.github.io[bitcoinj]:: Una libreria Java per client full node.

==== Python
https://oreil.ly/xn_rg[python-bitcoinlib]:: Una libreria per il consenso e un full node sviluppati da Peter Todd.
https://oreil.ly/wcpXP[pycoin]:: Una libreria Bitcoin sviluppata da Richard Kiss.

==== Go
https://oreil.ly/h5MEI[btcd]:: Un client full node scritto in Go.

==== Rust
https://oreil.ly/me6gf[rust-bitcoin]:: Una libreria per la serializzazione, l'analisi dei dati e le chiamate API, scritta in Rust.

==== Scala
https://bitcoin-s.org[bitcoin-s]:: Un'implementazione di Bitcoin sviluppata in Scala.

==== C#
https://oreil.ly/Qfjgq[NBitcoin]:: Una libreria Bitcoin completa per il framework .NET.

Esistono molte altre librerie per un'ampia gamma di linguaggi di programmazione, e di nuove ne vengono create continuamente.

Se hai seguito le istruzioni di questo capitolo, ora hai un'istanza di Bitcoin Core in esecuzione e hai iniziato a esplorare la rete e la blockchain con il tuo full node. Da questo momento, puoi utilizzare in modo indipendente un software sotto il tuo controllo, su un computer che gestisci tu, per verificare che i bitcoin ricevuti rispettino tutte le regole del sistema, senza dipendere da alcuna autorità esterna. Nei prossimi capitoli, approfondiremo queste regole e scopriremo come il tuo nodo e il tuo wallet le applicano per proteggere i tuoi fondi, tutelare la tua privacy e rendere l'invio e la ricezione delle transazioni più efficienti.
